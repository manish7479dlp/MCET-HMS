<!DOCTYPE html>
<html lang="en">
<head>
    {{>metaData}}
    <title>Home</title>
    <link
      href="	https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
      
    />
   
</head>
<body>
    {{!-- heading --}}
    {{>heading}}

    {{!-- hostel pic in carousel --}}
    {{>hostelImageInCarousel}}


  {{>login}}


    <div class="footer makeContentCenter">
        <p>@copy-right 2021-2022</p>
    </div>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js"

    ></script>
    <script>

      const isValidUser = (passData , originalData) => {
        console.log(passData );
        console.log(originalData );
             return (passData.userId == originalData.userId && passData.password == originalData.password);
      }
       

       const login = async () => {
        
          try{
              const userId = document.getElementById("userId").value;
              const password = document.getElementById("password").value;
              const data = {
                userId,
                password
              }
              
              const url = "/admin";
              const response = await fetch(url);
              const reÌ¥sult = await response.json();

              const validUserData = reÌ¥sult.filter((originalData) => {
                   return (data.userId == originalData.userId && data.password == originalData.password);

              })

              console.log(validUserData[0])

              {{!-- console.log("ðŸš€ ~ file: index.hbs ~ line 59 ~ login ~ reÌ¥sult", reÌ¥sult) --}}
              {{!-- const valid = isValidUser(data , reÌ¥sult[0]) --}}

              if(validUserData.length > 0) {
                sessionStorage.setItem("auth", JSON.stringify(validUserData));
                {{!-- window.location.href = `/dashboard` --}}
                window.location.href = `/dashboard/${validUserData[0].hostelType}`
              } else {
                alert("Invalid details");
              }


          }catch(err) {
            console.log(err);
          }
       }
    </script>
</body>
</html>